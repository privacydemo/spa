<!doctype html>
<html lang="en">
  <head>
  
<script>
  // Define dataLayer and the gtag function.
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }

  // This ID is provided by OneTrust.
  gtag("set", "developer_id.dYWJhMj", true);

  // New combined gtag call to implement please
  gtag("consent", "default", [
  {
    // California-specific rules (US-CA)
    region: ["US-CA"],
    ad_storage: "denied",
    analytics_storage: "denied",
    functionality_storage: "granted",
    personalization_storage: "denied",
    security_storage: "granted",
    ad_user_data: "denied",
    ad_personalization: "denied"
  },
  {
    // Global default (for all other users)
    ad_storage: "granted",
    analytics_storage: "granted",
    functionality_storage: "granted",
    personalization_storage: "granted",
    security_storage: "granted",
    ad_user_data: "granted",
    ad_personalization: "granted"
  }
]);
</script>

<!-- Google Tag Manager Script -->
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K7RZMT5H'); //
</script>
<!-- End Google Tag Manager -->

<!-- OneTrust Cookies Consent Notice start for -->
<script
src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"
data-document-language="true"
type="text/javascript"
charset="UTF-8"
data-domain-script="019017c0-65b9-7f7b-9047-1ce80833de1e"
></script>
<!-- OneTrust will handle updating the GTM datalayer viables and fire the tags based on the custom event trigger that we will add within GTM, the event that passes the data is ‘OneTrustGroupsUpdated’. -->
<script type="text/javascript">
  function OptanonWrapper() {
    // Get groups removed by user (consent withdrawn)
    var initialGroups = window.otIniGrps || "";
    var activeGroups = window.OnetrustActiveGroups || "";
    var otDomainGrps = Optanon.GetDomainData().Groups;
    var otDeletedGrpIds = otGetInactiveId(initialGroups, activeGroups);
    // Delete cookies tied to those groups
    otDeletedGrpIds.forEach(groupId => {
      otDomainGrps.forEach(group => {
        if (group.CustomGroupId === groupId) {
          (group.Cookies || []).forEach(cookie => eraseCookie(cookie.Name));
        }
        (group.Hosts || []).forEach(host => {
          if (host.HostId === groupId) {
            (host.Cookies || []).forEach(cookie => eraseCookie(cookie.Name));
          }
        });
      });
    });
    // Store updated groups for next comparison
    window.otIniGrps = activeGroups;
    console.log('Consent updated:', activeGroups);
  
    // Push OneTrustGroupsUpdated event to GTM
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
    event: 'OneTrustGroupsUpdated',
    OnetrustActiveGroups: activeGroups
  });
  console.log('Pushed OneTrustGroupsUpdated event to dataLayer');

  // Reload page 
  setTimeout(function() {
    location.reload();
    }, 500); // Wait 500ms (half a second) before reloading
  }
  function otGetInactiveId(initial, active) {
    const initialArr = initial.split(',').filter(Boolean);
    const activeArr = active.split(',').filter(Boolean);
    return initialArr.filter(id => !activeArr.includes(id));
  }
  function eraseCookie(name) {
    const hostname = window.location.hostname;
    const domainParts = hostname.split('.');
    const pathArray = window.location.pathname.split('/');
    let domains = [];
    // Collect domain variants
    domains.push(hostname);
    if (domainParts.length > 2) {
      for (let i = 1; i <= domainParts.length - 2; i++) {
        domains.push(domainParts.slice(i).join('.'));
      }
    }
    domains.push(domainParts.slice(-2).join('.'));
    domains = domains.concat(domains.map(d => (d.startsWith('.') ? d : '.' + d)));
    domains = [...new Set(domains)];
    // Delete across domain + paths
    for (const domain of domains) {
      document.cookie = `${name}=; Max-Age=0; Path=/; Domain=${domain};`;
      document.cookie = `${name}=; Max-Age=0; Path=/;`;
      for (let i = 0; i < pathArray.length; i++) {
        const currentPath = '/' + pathArray.slice(0, i + 1).join('/');
        document.cookie = `${name}=; Max-Age=0; Path=${currentPath}; Domain=${domain};`;
        document.cookie = `${name}=; Max-Age=0; Path=${currentPath};`;
      }
    }
    try {
      localStorage.removeItem(name);
    } catch (e) {
      console.warn('LocalStorage remove error:', e);
    }
  }
  function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) {
            return true;
        }
    }
    function reloadOTBanner() {
  
        var otConsentSdk = document.getElementById("onetrust-consent-sdk");
        if (otConsentSdk) {
            otConsentSdk.remove();
        }
  
        if (window.OneTrust != null) {
            OneTrust.Init();
  
            setTimeout(function() {
                OneTrust.LoadBanner();
  
                var toggleDisplay = document.getElementsByClassName(
                    "ot-sdk-show-settings"
                );
  
                for (var i = 0; i < toggleDisplay.length; i++) {
                    toggleDisplay[i].onclick = function(event) {
                        event.stopImmediatePropagation();
                        window.OneTrust.ToggleInfoDisplay();
                    };
                }
            }, 1000);
        }
    }
  </script>
  <!-- OneTrust Cookies Consent Notice end for -->

  <script type='text/plain' class='optanon-category-C0002'>
    document.cookie = "SPAPerformanceOne=RamaccaPerformanceOne; path=/; domain=.privacy-demo.com; max-age=31536000";
  </script>

  <script type='text/plain' class='optanon-category-C0002'>
      document.cookie = "SPAPerformanceTwo=RamaccaPerformanceTwo; path=/; domain=.privacy-demo.com; max-age=31536000";
  </script>

  <script class='optanon-category-C0004'>
      document.cookie = "SPATargetingOne=RamaccaTargetingOne; path=/; domain=.privacy-demo.com; max-age=31536000";
  </script>

  <script type='text/plain' class='optanon-category-C0004'>
      document.cookie = "SPATargetingTwo=RamaccaTargetingTwo; path=/; domain=.privacy-demo.com; max-age=31536000";
  </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Life Care Hospital</title>

    <!-- Favicon for browsers -->
    <link rel="icon" href="/icons/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/icons/favicon-32x32.png" sizes="32x32" type="image/png" />
    <link rel="icon" href="/icons/favicon-16x16.png" sizes="16x16" type="image/png" />

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />

    <!-- Android Chrome Icons -->
    <link rel="icon" href="/icons/android-chrome-192x192.png" sizes="192x192" type="image/png" />
    <link rel="icon" href="/icons/android-chrome-512x512.png" sizes="512x512" type="image/png" />

    <!-- Web Manifest -->
    <link rel="manifest" href="/icons/site.webmanifest" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
